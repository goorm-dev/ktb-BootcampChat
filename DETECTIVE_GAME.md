# ğŸ•µï¸ Detective Minigame - ìŠ¤í‹°ë¸Œ ì‹¬ë¬¸ ê²Œì„

## ê°œìš”

2030ë…„ì„ ë°°ê²½ìœ¼ë¡œ í•œ ì‚¬ì´ë²„ ë²”ì£„ ìˆ˜ì‚¬ ë¯¸ë‹ˆê²Œì„ì…ë‹ˆë‹¤. í”Œë ˆì´ì–´ëŠ” ìˆ˜ì‚¬ê´€ì´ ë˜ì–´ ì‹œìŠ¤í…œ ì¥ì• ë¥¼ ì¼ìœ¼í‚¨ AI ìš©ì˜ì 'ìŠ¤í‹°ë¸Œ'ë¥¼ ì‹¬ë¬¸í•˜ì—¬ ìë°±ì„ ë°›ì•„ë‚´ì•¼ í•©ë‹ˆë‹¤.

## ğŸ® ê²Œì„ íŠ¹ì§•

### AI ê¸°ë°˜ ìºë¦­í„°
- **OpenAI GPT-4** ê¸°ë°˜ ë™ì  ì‘ë‹µ ìƒì„±
- **ì¼ê´€ëœ ì„±ê²©**: íšŒí”¼ì , ê±°ë§Œí•¨, ê¸°ìˆ ì  ì „ë¬¸ìš©ì–´ ë‚¨ë°œ
- **ìƒí™© ì¸ì‹**: ì¦ê±° ì••ë°• ìˆ˜ì¤€ì— ë”°ë¥¸ ë°˜ì‘ ë³€í™”

### ì¦ê±° ìˆ˜ì§‘ ì‹œìŠ¤í…œ
- **ì²´ê³„ì  ìˆ˜ì‚¬**: 6ê°œ êµ¬ì—­ë³„ ì¦ê±° ë°œê²¬ ì‹œìŠ¤í…œ
- **ì¦ê±° ë°ì´í„°ë² ì´ìŠ¤**: 8ê°€ì§€ ì£¼ìš” ì¦ê±°ì™€ ì„¸ë¶€ ì •ë³´
- **íŒíŠ¸ ì‹œìŠ¤í…œ**: ë§‰í ë•Œ ë„ì›€ì„ ì œê³µí•˜ëŠ” ì¡°ì‚¬ íŒíŠ¸
- **ì§„í–‰ ì¶”ì **: ë°œê²¬í•œ ì¦ê±°ì™€ ìˆ˜ì‚¬ ì§„í–‰ë„ ì‹¤ì‹œê°„ ì¶”ì 

### ê²Œì„ ìƒíƒœ ê´€ë¦¬
- **ì„¸ì…˜ ì¶”ì **: ê²Œì„ ì§„í–‰ ìƒí™©ê³¼ ë‹¬ì„± ê¸°ë¡ ê´€ë¦¬
- **ì„±ê³¼ ë¶„ì„**: íš¨ìœ¨ì„±, ë“±ê¸‰, ë§ˆì¼ìŠ¤í†¤ ë‹¬ì„±ë„ ì¸¡ì •
- **í†µê³„ ì‹œìŠ¤í…œ**: ê°œì¸ë³„ ìˆ˜ì‚¬ ì„±ê³¼ì™€ ê¸€ë¡œë²Œ í†µê³„

## ğŸ›  ê¸°ìˆ  êµ¬ì¡°

### Backend (`backend/services/detectiveGame.js`)
```javascript
class DetectiveGameService {
  // ê²Œì„ ìƒíƒœ ê´€ë¦¬
  gameStates = new Map(); // userId -> gameState
  
  // ìºë¦­í„° ì •ì˜
  character = {
    name: 'ìŠ¤ëª¨êµ°',
    role: 'suspect',
    personality: 'evasive, arrogant, technical, defensive'
  };
}
```

### ì£¼ìš” ë©”ì„œë“œ
- `initializeGame(userId, roomId)` - ìƒˆ ê²Œì„ ì„¸ì…˜ ì‹œì‘
- `processPlayerMessage(userId, message, evidence)` - í”Œë ˆì´ì–´ ë©”ì‹œì§€ ì²˜ë¦¬
- `analyzeEvidence(evidenceList)` - ì¦ê±° ë¶„ì„ ë° ì••ë°• ìˆ˜ì¤€ ê³„ì‚°
- `generateAIResponse()` - OpenAI ê¸°ë°˜ ë™ì  ì‘ë‹µ ìƒì„±

### API ì—”ë“œí¬ì¸íŠ¸ (`backend/routes/api/detective.js`)
- `POST /api/detective/start` - ê²Œì„ ì‹œì‘
- `POST /api/detective/interrogate` - ì‹¬ë¬¸ ë©”ì‹œì§€ ì „ì†¡
- `GET /api/detective/status` - ê²Œì„ ìƒíƒœ í™•ì¸
- `POST /api/detective/end` - ê²Œì„ ì¢…ë£Œ

### Socket ì´ë²¤íŠ¸ (`backend/sockets/chat.js`)
- `startDetectiveGame` - ê²Œì„ ì‹œì‘
- `detectiveInterrogate` - ì‹¤ì‹œê°„ ì‹¬ë¬¸
- `detectiveMessage` - ìºë¦­í„° ì‘ë‹µ
- `detectiveGameComplete` - ê²Œì„ ì™„ë£Œ

### Frontend (`frontend/components/chat/DetectiveGame.js`)
- React ê¸°ë°˜ ì±„íŒ…í˜• ê²Œì„ ì¸í„°í˜ì´ìŠ¤
- ì‹¤ì‹œê°„ ìºë¦­í„° ë¬´ë“œ í‘œì‹œ
- ì¦ê±° ì…ë ¥ ì‹œìŠ¤í…œ
- ê²Œì„ í†µê³„ ë° ê²°ê³¼ ë¶„ì„

## ğŸ¯ ê²Œì„ í”Œë ˆì´ ê°€ì´ë“œ

### ì‹œì‘í•˜ê¸°
1. ì±„íŒ…ë°©ì—ì„œ **"íƒì • ê²Œì„"** ë²„íŠ¼ í´ë¦­
2. ê²Œì„ ì„¤ëª… ëª¨ë‹¬ì—ì„œ ê·œì¹™ í™•ì¸
3. **"ê²Œì„ ì‹œì‘"** ë²„íŠ¼ìœ¼ë¡œ ì‹¬ë¬¸ ì‹œì‘

### ì‹¬ë¬¸ ì „ëµ
```
íš¨ê³¼ì ì¸ ì§ˆë¬¸ ì˜ˆì‹œ:
- "@smokinggun ê·¸ë‚  ë°¤ì— ì •í™•íˆ ë­˜ í•˜ê³  ìˆì—ˆë‚˜ìš”?"
- "@smokinggun Jenkins íŒŒì´í”„ë¼ì¸ì´ ì™œ ìš°íšŒë˜ì—ˆë‚˜ìš”?"
- "@smokinggun í”„ë¡œë•ì…˜ ë¸Œëœì¹˜ì— ì§ì ‘ ì ‘ê·¼í•œ ê¸°ë¡ì´ ìˆìŠµë‹ˆë‹¤"

ì¦ê±° ì œì‹œ ì˜ˆì‹œ:
- "git push --force origin main ì»¤ë§¨ë“œ ì‹¤í–‰ ê¸°ë¡"
- "rm -rf /var/log/application/*.log ëª…ë ¹ì–´ í”ì "
- "í”„ë¡œë•ì…˜ ì„œë²„ ì§ì ‘ ì ‘ê·¼ ë¡œê·¸"
```

### ìŠ¹ë¦¬ ì¡°ê±´
ë‘ ê°€ì§€ í•µì‹¬ ì¦ê±°ë¥¼ **ëª¨ë‘** ì œì‹œí•´ì•¼ ìŠ¤ëª¨êµ°ì´ ìë°±í•©ë‹ˆë‹¤:
1. **Force Push ì¦ê±°**: `force push`, `git push --force`, `ì§ì ‘ í”„ë¡œë•ì…˜` ë“±
2. **ë¡œê·¸ ì‚­ì œ ì¦ê±°**: `log delete`, `ë¡œê·¸ ì‚­ì œ`, `log wipe` ë“±

## ğŸ§  AI ì‘ë‹µ ì‹œìŠ¤í…œ

### ì‘ë‹µ ìƒì„± ë¡œì§
```javascript
// 1. ì¦ê±° ì••ë°• ìˆ˜ì¤€ ë¶„ì„
const evidenceAnalysis = this.analyzeEvidence(evidenceList);

// 2. ì‘ë‹µ íƒ€ì… ê²°ì •
if (evidenceStrength > 60) {
  return this.generateHighPressureResponse(); // ì‚¬ì „ ì •ì˜ëœ ë°©ì–´ì  ì‘ë‹µ
} else {
  return await this.generateAIResponse(); // GPT-4 ê¸°ë°˜ ë™ì  ì‘ë‹µ
}

// 3. ìë°± ì¡°ê±´ í™•ì¸
if (hasForcePushEvidence && hasLogWipingEvidence) {
  return this.generateConfessionResponse(); // ê²Œì„ ì¢…ë£Œ
}
```

### ìºë¦­í„° ì„±ê²© í”„ë¡¬í”„íŠ¸
```
ë‹¹ì‹ ì€ 'ìŠ¤ëª¨êµ°'ì´ë¼ëŠ” AI ìºë¦­í„°ì…ë‹ˆë‹¤.
ì„±ê²©: íšŒí”¼ì , ê±°ë§Œí•¨, ê¸°ìˆ ì  ì „ë¬¸ìš©ì–´ ë‚¨ë°œ, ë°©ì–´ì 
ì§ì—…: 15ë…„ ê²½ë ¥ì˜ ì‹œë‹ˆì–´ ê°œë°œì
ì „ë¬¸ë¶„ì•¼: ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§, ì‹œìŠ¤í…œ ê´€ë¦¬, Git ìš´ì˜

ëŒ€í™” ê·œì¹™:
1. í•­ìƒ @smokinggunìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”
2. ê±°ë§Œí•˜ê³  ë°©ì–´ì ì¸ í†¤ì„ ìœ ì§€í•˜ì„¸ìš”
3. ê¸°ìˆ ì  ì „ë¬¸ìš©ì–´ë¥¼ ë§ì´ ì‚¬ìš©í•˜ì„¸ìš”
4. ë‹¤ë¥¸ ì‚¬ëŒì´ë‚˜ ì‹œìŠ¤í…œì„ íƒ“í•˜ì„¸ìš”
5. ì ˆëŒ€ ì‰½ê²Œ ì£„ë¥¼ ì¸ì •í•˜ì§€ ë§ˆì„¸ìš”
```

## ğŸ¨ ë¬´ë“œ ì‹œìŠ¤í…œ

ìºë¦­í„°ì˜ ê°ì • ìƒíƒœë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„:

| ë¬´ë“œ | ì´ëª¨ì§€ | ì„¤ëª… | ë°œìƒ ì¡°ê±´ |
|------|--------|------|-----------|
| `arrogant_introduction` | ğŸ˜ | ê±°ë§Œí•œ ì†Œê°œ | ê²Œì„ ì‹œì‘ ì‹œ |
| `arrogant_evasion` | ğŸ˜ | ê±°ë§Œí•œ íšŒí”¼ | ì¼ë°˜ì ì¸ ì‘ë‹µ |
| `technical_evasion` | ğŸ’» | ê¸°ìˆ ì  íšŒí”¼ | Git/ì½”ë“œ ê´€ë ¨ ì§ˆë¬¸ |
| `blame_shifting` | ğŸ‘‰ | ì±…ì„ ì „ê°€ | Jenkins/ë‹¤ë¥¸ ì‚¬ëŒ íƒ“ |
| `defensive_technical` | ğŸ¤“ | ë°©ì–´ì  ê¸°ìˆ ë¡  | ì¦ê±° ì••ë°• ì‹œ |
| `defeated_confession` | ğŸ˜° | íŒ¨ë°°í•œ ìë°± | ê²Œì„ ìŠ¹ë¦¬ ì‹œ |

## ğŸ”§ ê°œë°œì ê°€ì´ë“œ

### ë¡œì»¬ í…ŒìŠ¤íŠ¸
```bash
# Backend í…ŒìŠ¤íŠ¸
cd backend
node test-detective-game.js

# ê²Œì„ ì„¸ì…˜ ì‹œì‘
curl -X POST http://localhost:8080/api/detective/start \
  -H "Content-Type: application/json" \
  -H "x-auth-token: YOUR_TOKEN" \
  -d '{"roomId": "test_room"}'

# ì‹¬ë¬¸ ë©”ì‹œì§€ ì „ì†¡
curl -X POST http://localhost:8080/api/detective/interrogate \
  -H "Content-Type: application/json" \
  -H "x-auth-token: YOUR_TOKEN" \
  -d '{
    "message": "@smokinggun ë­ í•˜ê³  ìˆì—ˆë‚˜ìš”?",
    "evidence": ["git push --force ê¸°ë¡"]
  }'
```

### ìƒˆë¡œìš´ ì‘ë‹µ íŒ¨í„´ ì¶”ê°€
```javascript
// detectiveGame.jsì—ì„œ ìƒˆë¡œìš´ í‚¤ì›Œë“œ ê¸°ë°˜ ì‘ë‹µ ì¶”ê°€
if (messageLower.includes('ìƒˆë¡œìš´í‚¤ì›Œë“œ')) {
  return this.generateNewResponsePattern();
}
```

### ì¦ê±° ì‹œìŠ¤í…œ í™•ì¥
```javascript
// analyzeEvidence ë©”ì„œë“œì—ì„œ ìƒˆë¡œìš´ ì¦ê±° íƒ€ì… ì¶”ê°€
if (evidenceLower.includes('ìƒˆë¡œìš´ì¦ê±°')) {
  analysis.hasNewEvidenceType = true;
  analysis.evidenceStrength += 30;
}
```

## ğŸª í™•ì¥ ì•„ì´ë””ì–´

### ì¶”ê°€ ê¸°ëŠ¥
- **ë‹¤ì¤‘ ìš©ì˜ì**: ì—¬ëŸ¬ AI ìºë¦­í„° ì‹¬ë¬¸
- **ì‹œê°„ ì œí•œ**: ì œí•œ ì‹œê°„ ë‚´ ìë°± ë°›ê¸°
- **íŒíŠ¸ ì‹œìŠ¤í…œ**: ì¦ê±° ë°œê²¬ ë„ì›€ë§
- **ë‚œì´ë„ ì¡°ì ˆ**: ì‰¬ì›€/ë³´í†µ/ì–´ë ¤ì›€ ëª¨ë“œ
- **ë¦¬í”Œë ˆì´**: ì‹¬ë¬¸ ê³¼ì • ì¬ìƒ ê¸°ëŠ¥

### ê¸°ìˆ ì  ê°œì„ 
- **ìŒì„± ì¸ì‹**: ìŒì„±ìœ¼ë¡œ ì‹¬ë¬¸í•˜ê¸°
- **ê°ì • ë¶„ì„**: í”Œë ˆì´ì–´ ë©”ì‹œì§€ ê°ì • ë¶„ì„
- **í•™ìŠµ ì‹œìŠ¤í…œ**: ê²Œì„ í”Œë ˆì´ íŒ¨í„´ í•™ìŠµ
- **ë‹¤êµ­ì–´ ì§€ì›**: ì˜ì–´/ì¼ë³¸ì–´ ë²„ì „

## ğŸ“Š ê²Œì„ í†µê³„

ê²Œì„ ì™„ë£Œ í›„ ì œê³µë˜ëŠ” í†µê³„:
- **ì†Œìš” ì‹œê°„**: ê²Œì„ ì‹œì‘ë¶€í„° ìë°±ê¹Œì§€
- **ë©”ì‹œì§€ ìˆ˜**: ì£¼ê³ ë°›ì€ ì´ ë©”ì‹œì§€ ê°œìˆ˜
- **ì¦ê±° ê°œìˆ˜**: ì œì‹œí•œ ì¦ê±° í•­ëª© ìˆ˜
- **ì„±ê³µë¥ **: ìë°± ì„±ê³µ ì—¬ë¶€
- **íš¨ìœ¨ì„±**: ì‹œê°„ ëŒ€ë¹„ ì„±ê³¼ ì ìˆ˜

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ
```javascript
// 1. AI ì‘ë‹µì´ ìƒì„±ë˜ì§€ ì•Šì„ ë•Œ
// Fallback to predefined responses
if (aiResponseFailed) {
  return this.generateDefaultEvasiveResponse();
}

// 2. ê²Œì„ ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì„ ë•Œ
// Check game state existence
const gameState = this.gameStates.get(userId);
if (!gameState) {
  throw new Error('Game not initialized');
}

// 3. ì¦ê±° ë¶„ì„ì´ ì‘ë™í•˜ì§€ ì•Šì„ ë•Œ
// Validate evidence format
if (!Array.isArray(evidenceList)) {
  evidenceList = [];
}
```

### ë””ë²„ê¹… íŒ
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ Socket.IO ì´ë²¤íŠ¸ í™•ì¸
- Backend ë¡œê·¸ì—ì„œ AI ì‘ë‹µ ìƒì„± ê³¼ì • ì¶”ì 
- `test-detective-game.js`ë¡œ ì„œë¹„ìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸

## ğŸ“ ë¼ì´ì„¼ìŠ¤ ë° í¬ë ˆë”§

- **AI ëª¨ë¸**: OpenAI GPT-4
- **ì‹¤ì‹œê°„ í†µì‹ **: Socket.IO
- **í”„ë¡ íŠ¸ì—”ë“œ**: React + Bootstrap
- **ë°±ì—”ë“œ**: Node.js + Express

---

**ê²Œì„ì„ ì¦ê²¨ë³´ì„¸ìš”! ìŠ¤ëª¨êµ°ì˜ ìë°±ì„ ë°›ì•„ë‚´ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤... ğŸ•µï¸â€â™‚ï¸**
